<!doctype html>
<html lang="el">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thronos Driver Platform</title>
    <link rel="icon" href="https://thronoschain.org/thronos-coin.png" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="app-shell">

      <!-- â”€â”€ Hero â”€â”€ -->
      <div class="card" style="text-align:center;padding:28px 16px;">
        <div style="font-size:2.4rem;margin-bottom:8px;">ğŸ”—</div>
        <div class="card-title" style="font-size:1.05rem;letter-spacing:0.05em;color:var(--text);">
          Thronos Driver Platform
        </div>
        <p class="small-text" style="margin-top:8px;line-height:1.8;">
          Fleet Intelligence &nbsp;Â·&nbsp; AI Safety Scoring &nbsp;Â·&nbsp; Voice Dispatch &nbsp;Â·&nbsp; Blockchain Rewards
        </p>
      </div>

      <!-- â”€â”€ ENTRY 1: Drivers â”€â”€ -->
      <div class="card">
        <div class="card-header">
          <div>
            <div style="font-size:1.5rem;line-height:1;">ğŸš—</div>
            <div class="card-title" style="margin-top:4px;color:var(--text);">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚ ÎŸÎ´Î·Î³Î¿Ï</div>
          </div>
          <span class="badge">OTP</span>
        </div>
        <p class="small-text" style="margin-bottom:14px;line-height:1.7;">
          Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ ÎºÏ‰Î´Î¹ÎºÏŒ SMS. Î“Î¹Î± <strong>Taxi</strong>, <strong>Î£Ï‡Î¿Î»Î® ÎŸÎ´Î®Î³Î·ÏƒÎ·Ï‚</strong>,
          <strong>ÎœÎµÏ„Î±Ï†Î¿ÏÎ¹ÎºÎ®</strong> ÎºÎ±Î¹ ÎµÎ»ÎµÏÎ¸ÎµÏÎ¿Ï…Ï‚ ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¯ÎµÏ‚.
        </p>
        <div class="row">
          <a class="primary full" href="/app" style="text-decoration:none;text-align:center;padding:9px 14px;border-radius:999px;font-size:13px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;background:radial-gradient(circle at top left,var(--accent),#01c87b);color:#02140a;">
            Taxi / Fleet
          </a>
          <a class="outline full" href="/school" style="text-decoration:none;text-align:center;padding:9px 14px;border-radius:999px;font-size:13px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;border:1px solid #28374a;color:var(--muted);">
            Î£Ï‡Î¿Î»Î® / Î•ÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î®Ï‚
          </a>
        </div>
        <p class="small-text" style="margin-top:10px;font-size:10px;">
          Î‘Î½ Î±Î½Î®ÎºÎµÎ¹Ï‚ ÏƒÎµ Ï†Î¿ÏÎ­Î± (ÏƒÏ‡Î¿Î»Î®, Î¼ÎµÏ„Î±Ï†Î¿ÏÎ¹ÎºÎ®, taxi fleet) ÏƒÏ…Î½Î´Î­ÏƒÎ¿Ï… Î¼Îµ Ï„Î¿ ÎºÎ¹Î½Î·Ï„ÏŒ ÏƒÎ¿Ï… ÎºÎ±Î¹ Î¿ Ï†Î¿ÏÎ­Î±Ï‚ ÏƒÎ¿Ï… ÎµÎ½Ï„Î¿Ï€Î¯Î¶ÎµÏ„Î±Î¹ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î±.
        </p>
      </div>

      <!-- â”€â”€ ENTRY 2: Operator â”€â”€ -->
      <div class="card">
        <div class="card-header">
          <div>
            <div style="font-size:1.5rem;line-height:1;">ğŸ¢</div>
            <div class="card-title" style="margin-top:4px;color:var(--text);">Operator Dashboard</div>
          </div>
          <span class="badge">Admin</span>
        </div>
        <p class="small-text" style="margin-bottom:14px;line-height:1.7;">
          Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÏƒÏ„ÏŒÎ»Î¿Ï…, live map, AI stats, Ï†Ï‰Î½Î·Ï„Î¹ÎºÎ¬ Î¼Î·Î½ÏÎ¼Î±Ï„Î±, ÎµÎ³ÎºÏÎ¯ÏƒÎµÎ¹Ï‚ Î¿Î´Î·Î³ÏÎ½, pending claims, rewards.
          Î‘Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ <strong>Operator Token</strong>.
        </p>
        <button class="primary full" id="btnGotoOperator">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚ Î¼Îµ Operator Token</button>
        <div id="operatorEntryMsg" class="small-text" style="margin-top:6px;"></div>
      </div>

      <!-- Operator token modal -->
      <div id="operatorEntryModal" class="card" style="display:none;border-color:var(--accent);">
        <div class="card-header">
          <div class="card-title" style="color:var(--text);">Operator Token</div>
          <button class="outline" id="btnCloseOperatorEntry">âœ•</button>
        </div>
        <p class="small-text" style="margin-bottom:10px;line-height:1.6;">
          Î•Î¹ÏƒÎ®Î³Î±Î³Îµ Ï„Î¿Î½ operator token Ï„Î¿Ï… Ï†Î¿ÏÎ­Î± ÏƒÎ¿Ï…. ÎŸ ÎºÏ‰Î´Î¹ÎºÏŒÏ‚ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿Î½ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î® Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… API.
        </p>
        <div class="field-group">
          <label for="entryOperatorToken">Operator Token</label>
          <input id="entryOperatorToken" type="password" placeholder="tok_â€¦" autocomplete="off" />
        </div>
        <button class="primary full" id="btnSubmitOperatorEntry">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚ ÏƒÏ„Î¿ Dashboard</button>
      </div>

      <!-- â”€â”€ ENTRY 3: Trial â”€â”€ -->
      <div class="card">
        <div class="card-header">
          <div>
            <div style="font-size:1.5rem;line-height:1;">ğŸ†•</div>
            <div class="card-title" style="margin-top:4px;color:var(--text);">ÎÎ­Î¿Ï‚ Î¦Î¿ÏÎ­Î±Ï‚ â€” 14 Î—Î¼Î­ÏÎµÏ‚ Î”Ï‰ÏÎµÎ¬Î½</div>
          </div>
          <span class="badge">Free</span>
        </div>
        <p class="small-text" style="margin-bottom:14px;line-height:1.7;">
          Î”Î·Î¼Î¹Î¿ÏÏÎ³Î·ÏƒÎµ Ï„Î¿Î½ <strong>Î´Î¹ÎºÏŒ ÏƒÎ¿Ï… Ï†Î¿ÏÎ­Î±</strong> (Taxi fleet, Î£Ï‡Î¿Î»Î® ÎŸÎ´Î®Î³Î·ÏƒÎ·Ï‚, ÎœÎµÏ„Î±Ï†Î¿ÏÎ¹ÎºÎ®)
          Ï‡Ï‰ÏÎ¯Ï‚ ÎºÎ¬ÏÏ„Î±. Î¤Î¿ trial Î¾ÎµÎºÎ¹Î½Î¬ Î±Î¼Î­ÏƒÏ‰Ï‚.
        </p>
        <button class="outline full" id="btnOpenTrial">ÎÎµÎºÎ¯Î½Î± 14Î®Î¼ÎµÏÎ¿ Trial</button>
      </div>

      <!-- Trial form modal -->
      <div id="trialModal" class="card" style="display:none;border-color:var(--accent);">
        <div class="card-header">
          <div class="card-title" style="color:var(--text);">Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Trial Î¦Î¿ÏÎ­Î±</div>
          <button class="outline" id="btnCloseTrial">âœ•</button>
        </div>
        <div class="field-group">
          <label for="trialCompany">ÎŒÎ½Î¿Î¼Î± Ï†Î¿ÏÎ­Î± *</label>
          <input id="trialCompany" placeholder="Ï€.Ï‡. Taxiway Athens" />
        </div>
        <div class="field-group">
          <label for="trialType">Î¤ÏÏ€Î¿Ï‚ Ï†Î¿ÏÎ­Î± *</label>
          <select id="trialType">
            <option value="taxi">ğŸš• Taxi / Fleet</option>
            <option value="school">ğŸ« Î£Ï‡Î¿Î»Î® ÎŸÎ´Î®Î³Î·ÏƒÎ·Ï‚</option>
            <option value="transport">ğŸšš ÎœÎµÏ„Î±Ï†Î¿ÏÎ¹ÎºÎ®</option>
            <option value="drone">ğŸš Drone Operations</option>
          </select>
        </div>
        <div class="field-group">
          <label for="trialEmail">Email ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚ *</label>
          <input id="trialEmail" type="email" placeholder="ops@example.com" />
        </div>
        <div class="field-group">
          <label for="trialPhone">ÎšÎ¹Î½Î·Ï„ÏŒ (Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)</label>
          <input id="trialPhone" placeholder="69XXXXXXXX" />
        </div>
        <button class="primary full" id="btnCreateTrial">Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Trial</button>
        <div id="trialMessage" class="small-text" style="margin-top:8px;"></div>
      </div>

      <!-- Trial success card -->
      <div id="trialSuccess" class="card" style="display:none;border-color:var(--accent);">
        <div style="font-size:1.5rem;margin-bottom:6px;">âœ…</div>
        <div class="card-title" style="color:var(--accent);margin-bottom:10px;">ÎŸ Ï†Î¿ÏÎ­Î±Ï‚ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ!</div>
        <div id="trialSuccessDetails" class="small-text" style="line-height:2;"></div>
        <div class="row" style="margin-top:14px;">
          <a id="trialLinkApp" class="primary full" href="/app" style="text-decoration:none;text-align:center;padding:9px 14px;border-radius:999px;font-size:13px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;background:radial-gradient(circle at top left,var(--accent),#01c87b);color:#02140a;">
            Î£ÏÎ½Î´ÎµÏƒÎ· ÎŸÎ´Î·Î³ÏÎ½
          </a>
          <a class="outline full" href="/operator" style="text-decoration:none;text-align:center;padding:9px 14px;border-radius:999px;font-size:13px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;border:1px solid #28374a;color:var(--muted);">
            Operator Panel
          </a>
        </div>
      </div>

      <!-- â”€â”€ Features â”€â”€ -->
      <div class="card">
        <div class="card-title">Î¤Î¹ Ï€ÏÎ¿ÏƒÏ†Î­ÏÎµÎ¹ Î· Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î±</div>
        <ul style="margin:10px 0 0;padding-left:1.2rem;line-height:2.2;" class="small-text">
          <li>Taxi/ÎœÎµÏ„Î±Ï†Î¿ÏÎ¹ÎºÎ­Ï‚ ÏƒÏ„ÏŒÎ»Î¿Î¹ Î¼Îµ live map ÎºÎ±Î¹ approvals Î¿Î´Î·Î³ÏÎ½</li>
          <li>Î£Ï‡Î¿Î»Î­Ï‚ Î¿Î´Î®Î³Î·ÏƒÎ·Ï‚ â€” ÎµÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î­Ï‚ &amp; Î¼Î±Î¸Î·Ï„Î­Ï‚, scoreboard</li>
          <li>AI scoring Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚ (Ï†ÏÎµÎ½Î¬ÏÎ¹ÏƒÎ¼Î±, Ï„Î±Ï‡ÏÏ„Î·Ï„Î±, ÏƒÏ„ÏÎ¿Ï†Î­Ï‚)</li>
          <li>Voice CB â€” Î±Î¼Ï†Î¯Î´ÏÎ¿Î¼Î· Ï†Ï‰Î½Î·Ï„Î¹ÎºÎ® ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± dispatcher â†” Î¿Î´Î·Î³ÏŒÏ‚</li>
          <li>Transport marketplace Î³Î¹Î± ÎµÎ»ÎµÏÎ¸ÎµÏÎ¿Ï…Ï‚ ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¯ÎµÏ‚</li>
          <li>Thronos Chain rewards Î³Î¹Î± Î¿Î´Î·Î³Î¿ÏÏ‚ Ï…ÏˆÎ·Î»Î®Ï‚ Î±Ï€ÏŒÎ´Î¿ÏƒÎ·Ï‚</li>
          <li>Fatigue detection &amp; driver alert system (coming soon)</li>
        </ul>
      </div>

      <!-- â”€â”€ Pricing â”€â”€ -->
      <div class="card">
        <div class="card-title">Pricing</div>
        <div id="plansHost" class="small-text">Loading plansâ€¦</div>
      </div>

      <footer class="card" style="text-align:center;">
        <span class="small-text">
          <a href="/terms">Terms of Service</a> &nbsp;|&nbsp;
          <a href="/privacy">Privacy Policy</a> &nbsp;|&nbsp;
          <a href="/refund">Refund Policy</a> &nbsp;|&nbsp;
          <a href="mailto:support@thronoschain.org">support@thronoschain.org</a>
        </span>
      </footer>
    </div>

    <script>
      const TYPE_LABELS = { taxi: 'Taxi / Fleet', school: 'Î£Ï‡Î¿Î»Î® ÎŸÎ´Î®Î³Î·ÏƒÎ·Ï‚', transport: 'ÎœÎµÏ„Î±Ï†Î¿ÏÎ¹ÎºÎ®', drone: 'Drone Operations' };

      async function loadPlans() {
        try {
          const r = await fetch('/api/plans');
          if (!r.ok) throw new Error();
          const data = await r.json();
          const plans = data.plans || {};
          const html = Object.entries(plans).map(([k, v]) =>
            `<div style="margin-bottom:10px;">
              <strong style="color:var(--text);">${k.toUpperCase()}</strong>
              â€” ${(v.features || []).join(', ')}
            </div>`
          ).join('');
          document.getElementById('plansHost').innerHTML = html || 'No plans available';
        } catch (_) {
          document.getElementById('plansHost').textContent = 'Plans unavailable';
        }
      }

      async function createTrial() {
        const btn = document.getElementById('btnCreateTrial');
        const msg = document.getElementById('trialMessage');
        const payload = {
          company_name: document.getElementById('trialCompany').value.trim(),
          contact_email: document.getElementById('trialEmail').value.trim(),
          phone: document.getElementById('trialPhone').value.trim() || null,
          type: document.getElementById('trialType').value,
        };
        if (!payload.company_name) { msg.textContent = 'Î•Î¹ÏƒÎ®Î³Î±Î³Îµ ÏŒÎ½Î¿Î¼Î± Ï†Î¿ÏÎ­Î±.'; return; }
        if (!payload.contact_email || !payload.contact_email.includes('@')) { msg.textContent = 'Î•Î¹ÏƒÎ®Î³Î±Î³Îµ Î­Î³ÎºÏ…ÏÎ¿ email.'; return; }

        btn.disabled = true;
        btn.textContent = 'Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±â€¦';
        msg.textContent = '';
        try {
          const resp = await fetch('/api/trials/create', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
          });
          const data = await resp.json().catch(() => ({}));
          if (resp.status === 429) {
            const sec = data.retry_after || 900;
            msg.textContent = `ÎŒÏÎ¹Î¿ Î´Î¿ÎºÎ¹Î¼ÏÎ½. Î”Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬ ÏƒÎµ ${Math.ceil(sec/60)} Î»ÎµÏ€Ï„Î¬.`;
            return;
          }
          if (!resp.ok) {
            msg.textContent = data.detail || `Î£Ï†Î¬Î»Î¼Î± (${resp.status}). Î•Ï€Î¹ÎºÎ¿Î¹Î½ÏÎ½Î·ÏƒÎµ Î¼Îµ support@thronoschain.org`;
            return;
          }
          // Success
          document.getElementById('trialModal').style.display = 'none';
          const card = document.getElementById('trialSuccess');
          card.style.display = 'block';
          document.getElementById('trialSuccessDetails').innerHTML =
            `<div><strong>Î¦Î¿ÏÎ­Î±Ï‚:</strong> ${data.name}</div>
             <div><strong>Î¤ÏÏ€Î¿Ï‚:</strong> ${TYPE_LABELS[payload.type] || payload.type}</div>
             <div><strong>Group tag:</strong> <code>${data.group_tag}</code></div>
             <div><strong>Trial Î»Î®Î³ÎµÎ¹:</strong> ${data.trial_ends_at ? data.trial_ends_at.split('T')[0] : '+14 Î·Î¼Î­ÏÎµÏ‚'}</div>
             <div style="margin-top:8px;">Î”Î·Î¼Î¹Î¿ÏÏÎ³Î·ÏƒÎµ operator token Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… API ÎºÎ±Î¹ Î¾ÎµÎºÎ¯Î½Î± Î½Î± Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶ÎµÏƒÎ±Î¹ Ï„Î¿Î½ ÏƒÏ„ÏŒÎ»Î¿ ÏƒÎ¿Ï….</div>`;
          card.scrollIntoView({ behavior: 'smooth' });
        } catch (_) {
          msg.textContent = 'Î£Ï†Î¬Î»Î¼Î± ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚. Î”Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬.';
        } finally {
          btn.disabled = false;
          btn.textContent = 'Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Trial';
        }
      }

      function submitOperatorEntry() {
        const token = document.getElementById('entryOperatorToken').value.trim();
        const msg = document.getElementById('operatorEntryMsg');
        if (!token) { msg.textContent = 'Î•Î¹ÏƒÎ®Î³Î±Î³Îµ Ï„Î¿Î½ operator token ÏƒÎ¿Ï….'; return; }
        localStorage.setItem('operator_token', token);
        window.location.href = '/operator?autoload=1';
      }

      // Events
      document.getElementById('btnOpenTrial').onclick = () => {
        document.getElementById('trialModal').style.display = 'block';
        document.getElementById('trialModal').scrollIntoView({ behavior: 'smooth' });
      };
      document.getElementById('btnCloseTrial').onclick = () => document.getElementById('trialModal').style.display = 'none';
      document.getElementById('btnCreateTrial').onclick = createTrial;

      document.getElementById('btnGotoOperator').onclick = () => {
        document.getElementById('operatorEntryModal').style.display = 'block';
        document.getElementById('operatorEntryModal').scrollIntoView({ behavior: 'smooth' });
      };
      document.getElementById('btnCloseOperatorEntry').onclick = () => document.getElementById('operatorEntryModal').style.display = 'none';
      document.getElementById('btnSubmitOperatorEntry').onclick = submitOperatorEntry;
      document.getElementById('entryOperatorToken').addEventListener('keydown', e => { if (e.key === 'Enter') submitOperatorEntry(); });

      loadPlans();
    </script>
  </body>
</html>
